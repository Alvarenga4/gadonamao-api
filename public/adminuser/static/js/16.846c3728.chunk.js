(this["webpackJsonpprojeto-gadonamao-admin-user-frontend"]=this["webpackJsonpprojeto-gadonamao-admin-user-frontend"]||[]).push([[16],{416:function(e,a,t){"use strict";t.r(a);var n=t(14),r=t.n(n),s=t(18),c=t(20),o=t(1),i=t(10),l=t(50),j=t(51),u=t(52),d=t(60),b=t(61),p=t(69),h=t(71),m=t(73),x=t(72),O=t(74),f=t(38),g=t(70),v=t(26),k=t(229),w=t(33),y=t(48),N=t(34),E=t(24),L=t(8);a.default=function(){var e=Object(i.h)(),a=Object(N.b)().signIn,t=Object(o.useContext)(y.a).setLoading,n=Object(o.useRef)(),C=Object(o.useState)({}),S=Object(c.a)(C,2),I=S[0],T=S[1],q=Object(o.useState)(""),z=Object(c.a)(q,2),F=z[0],J=z[1],R=Object(o.useState)(""),V=Object(c.a)(R,2),A=V[0],B=V[1];Object(o.useEffect)((function(){Object(s.a)(r.a.mark((function n(){var s,c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t(!0),n.next=4,E.a.get("/tokens/".concat(e.token));case 4:s=n.sent,c=s.data,a(e.token,c),t(!1),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),t(!1),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})))()}),[]);return e.token?null:Object(L.jsxs)(l.a,{children:[Object(L.jsx)(w.a,{ref:n}),Object(L.jsx)(j.a,{className:"justify-content-center align-items-center w-100 vh-100",children:Object(L.jsx)(u.a,{xs:"12",sm:"10",md:"6",lg:"5",children:Object(L.jsx)(d.a,{className:"p-4",children:Object(L.jsx)(b.a,{children:Object(L.jsxs)(p.a,{children:[Object(L.jsx)("h1",{children:"Login"}),Object(L.jsx)(h.a,{children:Object(L.jsxs)(m.a,{className:"input-group-merge ".concat(I.email?"invalid":""),children:[Object(L.jsx)(x.a,{type:"text",placeholder:"Email",value:F,invalid:!!I.email,onChange:function(e){var a=e.target.value;return J(a)}}),Object(L.jsx)(O.a,{addonType:"append",children:Object(L.jsx)(f.a,{children:Object(L.jsx)("i",{className:"fas fa-user"})})}),Object(L.jsx)(g.a,{children:I.email})]})}),Object(L.jsx)(h.a,{children:Object(L.jsxs)(m.a,{className:"input-group-merge ".concat(I.password?"invalid":""),children:[Object(L.jsx)(x.a,{type:"password",placeholder:"Senha",value:A,invalid:!!I.password,onChange:function(e){var a=e.target.value;return B(a)}}),Object(L.jsx)(O.a,{addonType:"append",children:Object(L.jsx)(f.a,{children:Object(L.jsx)("i",{className:"fas fa-eye-slash"})})}),Object(L.jsx)(g.a,{children:I.password})]})}),Object(L.jsx)(j.a,{children:Object(L.jsx)(u.a,{xs:"6",children:Object(L.jsx)(v.a,{color:"primary",className:"px-4",onClick:function(){Object(s.a)(r.a.mark((function e(){var t,s,c,o,i,l,j,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={email:F,password:A},s=k.b().shape({email:k.c().email("E-mail inv\xe1lido").required("Informe um email"),password:k.c().required("Informe uma senha")}),e.next=5,s.validate(t,{abortEarly:!1});case 5:return e.next=7,E.a.post("/authenticate",t);case 7:c=e.sent,o=c.data,i=o.token,l=o.user,n.current.notify({message:"Login realizado com sucesso"}),setTimeout((function(){a(i,l)}),2e3),e.next=28;break;case 13:if(e.prev=13,e.t0=e.catch(0),console.log(e.t0),T({}),!(e.t0 instanceof k.a)){e.next=23;break}return n.current.notify({message:"Falha na Valida\xe7\xe3o",color:"warning"}),j={},e.t0.inner.forEach((function(e){j[e.path]=e.message})),T(j),e.abrupt("return");case 23:if(!(e.t0&&e.t0.response&&e.t0.response.data)){e.next=27;break}return u=e.t0.response.data.message,n.current.notify({message:u,color:"danger"}),e.abrupt("return");case 27:n.current.notify({message:"Falha ao realizar Login",color:"danger"});case 28:case"end":return e.stop()}}),e,null,[[0,13]])})))()},children:"Login"})})})]})})})})})]})}}}]);
//# sourceMappingURL=16.846c3728.chunk.js.map