(this["webpackJsonpprojeto-gadonamao-admin-user-frontend"]=this["webpackJsonpprojeto-gadonamao-admin-user-frontend"]||[]).push([[13],{423:function(e,c,a){"use strict";a.r(c);var t=a(14),r=a.n(t),n=a(18),s=a(41),i=a(152),o=a(20),l=a(1),j=a(10),d=a(50),u=a(51),b=a(52),O=a(60),h=a(63),p=a(61),x=a(62),m=a(26),f=a(409),g=a.n(f),v=a(410),N=a(65),y=a(8),k=function(e){var c=e.files;return Object(y.jsx)(d.a,{className:"py-2",children:c.map((function(e){return e&&Object(y.jsxs)(u.a,{className:"align-items-center",children:[e.preview&&Object(y.jsx)(b.a,{sm:1,children:Object(y.jsx)("div",{style:{width:"36px",height:"36px",borderRadius:"5px",backgroundImage:"url(".concat(e.preview,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"50% 50%",marginRight:"10px"}})}),Object(y.jsxs)(b.a,{children:[Object(y.jsx)(u.a,{children:Object(y.jsxs)("div",{children:[Object(y.jsx)("strong",{className:"mr-2",children:e.name}),e.url&&Object(y.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:Object(y.jsx)("i",{className:"fas fa-link"})})]})},e.id),Object(y.jsxs)(u.a,{children:[e.error&&Object(y.jsxs)("small",{className:"text-danger",children:[Object(y.jsx)("i",{className:"fas fa-exclamation-circle mr-1"}),"Erro no upload. Tente enviar novamente."]}),!e.error&&!e.uploaded&&Object(y.jsxs)("div",{className:"w-100",children:[Object(y.jsxs)("small",{className:"text-info mr-3",children:[Object(y.jsx)("i",{className:"fas fa-file-upload mr-1"}),"Fazendo upload do arquivo"]}),e.progress?Object(y.jsx)(N.a,{color:"info",value:e.progress,style:{height:"0.5rem"}}):null]}),e.uploaded&&Object(y.jsxs)("small",{className:"text-success",children:[Object(y.jsx)("i",{className:"fas fa-check-circle mr-1"}),"Upload concluido com sucesso"]})]})]})]},e.id)}))})},S=a(415);function q(e){var c=e.accept,a=void 0===c?"image/*":c,t=e.message,r=void 0===t?"Selecione ou Arraste os arquivos aqui...":t,n=e.messageReject,s=void 0===n?"Arquivo n\xe3o suportado":n,o=e.messageAccept,l=void 0===o?"Solte os arquivos aqui":o,j=e.onUpload,d=function(e,c){return e?c?Object(y.jsx)("p",{className:"d-flex justify-content-center align-items-center py-3",style:{color:"var(--danger)"},children:s}):Object(y.jsx)("p",{className:"d-flex justify-content-center align-items-center py-3",style:{color:"var(--success)"},children:l}):Object(y.jsx)("p",{className:"d-flex justify-content-center align-items-center py-3",style:{color:"var(--dark)"},children:r})};return Object(y.jsx)(S.a,{accept:a,onDropAccepted:j,children:function(e){var c=e.getRootProps,a=e.getInputProps,t=e.isDragActive,r=e.isDragReject;return Object(y.jsxs)("div",Object(i.a)(Object(i.a)({},c()),{},{className:"dropzone w-100",style:{border:"1px dashed ".concat(t?"var(--success)":r?"var(--danger)":""),borderRadius:"0.75rem",cursor:"pointer",transition:"height 0.2s ease"},children:[Object(y.jsx)("input",Object(i.a)({},a())),d(t,r)]}))}})}var w=a(32),A=a(24);c.default=function(){var e=Object(j.g)(),c=Object(j.h)().id,a=Object(l.useState)(!1),t=Object(o.a)(a,2),f=t[0],N=t[1],S=Object(l.useState)([]),R=Object(o.a)(S,2),z=R[0],I=R[1],U=Object(l.useState)(),E=Object(o.a)(U,2),_=E[0],D=E[1],F=function(e,c,a){a?D(Object(i.a)(Object(i.a)({},_),c)):I((function(a){return a.map((function(a){return e===a.id?Object(i.a)(Object(i.a)({},a),c):a}))}))},P=function(e,c){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=new FormData;t.append("file",e.file,e.name),A.a.post(c,t,{onUploadProgress:function(c){var t=parseInt(Math.round(100*c.loaded/c.total),10);console.log("progress upload",t),F(e.id,{progress:t},a)}}).then((function(c){var t=c.data;F(e.id,{uploaded:!0,id:t._id,name:t.name,url:t.image_url?t.image_url:t.video_url},a)})).catch((function(){F(e.id,{error:!0},a)}))};return Object(l.useEffect)((function(){Object(n.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{N(!0)}catch(c){console.log(c)}case 1:case"end":return e.stop()}}),e)})))()}),[]),Object(l.useEffect)((function(){var e=JSON.parse(localStorage.getItem(w.a));e&&console.log(e)}),[]),Object(y.jsxs)(d.a,{children:[Object(y.jsx)(u.a,{children:Object(y.jsx)(b.a,{children:Object(y.jsx)(O.a,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)("h3",{children:"Adicione Fotos e V\xeddeo"})})})})}),Object(y.jsx)(u.a,{children:Object(y.jsx)(b.a,{children:Object(y.jsxs)(O.a,{children:[Object(y.jsx)(h.a,{children:Object(y.jsx)("h5",{children:"Imagens"})}),Object(y.jsx)(p.a,{children:Object(y.jsxs)(d.a,{children:[Object(y.jsx)(q,{onUpload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=e.map((function(e){return{file:e,id:Object(v.uniqueId)(),name:e.name,readableSize:g()(e.size),preview:URL.createObjectURL(e),progress:0,uploaded:!1,error:!1,url:null}}));I([].concat(Object(s.a)(a),Object(s.a)(z))),a.forEach((function(e){return P(e,"/images/".concat(c,"/animals"))}))}}),Object(y.jsx)(k,{files:z})]})})]})})}),Object(y.jsx)(u.a,{children:Object(y.jsx)(b.a,{children:Object(y.jsxs)(O.a,{children:[Object(y.jsxs)(h.a,{children:[Object(y.jsx)("h5",{children:"V\xeddeo"}),Object(y.jsx)("small",{children:"Envie apenas um v\xeddeo"})]}),Object(y.jsx)(p.a,{children:Object(y.jsxs)(d.a,{children:[!_&&Object(y.jsx)(q,{accept:"video/*",message:"Selecione ou Arraste o arquivo aqui...",messageAccept:"Solte o arquivo aqui",onUpload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!_){var a=e[0],t={file:a,id:Object(v.uniqueId)(),name:a.name,readableSize:g()(a.size),progress:0,uploaded:!1,error:!1,url:null};D(t),P(t,"/videos/".concat(c,"/animals"),!0)}}}),Object(y.jsx)(k,{files:[_]})]})})]})})}),f&&Object(y.jsx)(u.a,{children:Object(y.jsx)(b.a,{children:Object(y.jsx)(O.a,{children:Object(y.jsx)(x.a,{children:Object(y.jsxs)(u.a,{className:"justify-content-between px-3",children:[Object(y.jsx)(m.a,{onClick:function(){e("/anuncio-detalhes")},children:"Anterior"}),Object(y.jsx)(m.a,{onClick:function(){localStorage.removeItem(w.a),e("/anuncios")},children:"Finalizar"})]})})})})})]})}}}]);
//# sourceMappingURL=13.e6e29537.chunk.js.map