(this["webpackJsonpprojeto-gadonamao-admin-user-frontend"]=this["webpackJsonpprojeto-gadonamao-admin-user-frontend"]||[]).push([[12],{424:function(e,a,t){"use strict";t.r(a);var n=t(152),c=t(14),r=t.n(c),o=t(18),i=t(20),s=t(1),d=t(10),l=t(413),u=t(50),j=t(51),b=t(52),O=t(60),v=t(63),f=t(61),p=t(71),h=t(72),g=t(70),m=t(64),x=t(62),S=t(26),C=t(229),k=t(33),y=t(32),w=t(48),N=t(49),I=t(24),q=t(79),_=t.n(q).a.create({baseURL:"https://servicodados.ibge.gov.br/api/v1/localidades"}),J=t(8);a.default=function(){var e=Object(d.g)(),a=Object(s.useRef)(),t=Object(s.useContext)(w.a).setLoading,c=Object(N.b)(),q=c.store,E=c.update,P=Object(s.useState)(""),L=Object(i.a)(P,2),M=L[0],D=L[1],F=Object(s.useState)(""),R=Object(i.a)(F,2),z=R[0],A=R[1],B=Object(s.useState)([]),Q=Object(i.a)(B,2),T=Q[0],U=Q[1],G=Object(s.useState)({}),H=Object(i.a)(G,2),K=H[0],V=H[1],W=Object(s.useState)(!1),X=Object(i.a)(W,2),Y=X[0],Z=X[1],$=Object(s.useState)([]),ee=Object(i.a)($,2),ae=ee[0],te=ee[1],ne=Object(s.useState)(""),ce=Object(i.a)(ne,2),re=ce[0],oe=ce[1],ie=Object(s.useState)(!1),se=Object(i.a)(ie,2),de=se[0],le=se[1],ue=Object(s.useState)(""),je=Object(i.a)(ue,2),be=je[0],Oe=je[1],ve=Object(s.useState)(""),fe=Object(i.a)(ve,2),pe=fe[0],he=fe[1],ge=Object(s.useState)([]),me=Object(i.a)(ge,2),xe=me[0],Se=me[1],Ce=Object(s.useState)(""),ke=Object(i.a)(Ce,2),ye=ke[0],we=ke[1],Ne=Object(s.useState)({}),Ie=Object(i.a)(Ne,2),qe=Ie[0],_e=Ie[1],Je=Object(s.useState)(!1),Ee=Object(i.a)(Je,2),Pe=Ee[0],Le=Ee[1];Object(s.useEffect)((function(){Object(o.a)(r.a.mark((function e(){var a,t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Le(!0),e.next=4,I.a.get("/unidades");case 4:a=e.sent,(t=a.data).sort((function(e,a){return e.name>a.name?1:-1})),Se(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[]),Object(s.useEffect)((function(){var e=JSON.parse(localStorage.getItem(y.a));e&&(console.log(e),A(e.titulo?e.titulo:""),D(e.descricao?e.descricao:""),V(e.estado?e.estado:""),oe(e.cidade?e.cidade:""),Oe(e.preco?e.preco:""),we(e.unidade?e.unidade:""),he(e.quantidade?e.quantidade:""))}),[]);var Me=Object(s.useCallback)((function(e){oe(null),V(""),(null===e||void 0===e?void 0:e.value)?(V(e),Object(o.a)(r.a.mark((function a(){var n,c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t(!0),le(!0),a.next=5,_.get("estados/".concat(e.value,"/municipios"));case 5:n=a.sent,c=n.data,te((void 0===c?[]:c).map((function(e){var a,t;return{value:null===e||void 0===e?void 0:e.nome,label:null===e||void 0===e?void 0:e.nome,region:null===e||void 0===e||null===(a=e.microrregiao)||void 0===a||null===(t=a.mesorregiao)||void 0===t?void 0:t.nome}}))),t(!1),le(!1),a.next=18;break;case 13:a.prev=13,a.t0=a.catch(0),t(!1),le(!1),console.log(a.t0);case 18:case"end":return a.stop()}}),a,null,[[0,13]])})))()):te([])}),[]),De=Object(s.useCallback)((function(){T.length||Object(o.a)(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(!0),Z(!0),e.next=5,_.get("estados?orderBy=nome");case 5:a=e.sent,n=a.data,U((void 0===n?[]:n).map((function(e){return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.nome,sigla:null===e||void 0===e?void 0:e.sigla}}))),t(!1),Z(!1),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),t(!1),Z(!1),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[]),Fe=Object(s.useCallback)((function(e){oe(e||null)}),[]),Re={control:function(e){return Object(n.a)(Object(n.a)({},e),{},{backgroundColor:"#fff",borderRadius:"0.75rem",padding:"0.3rem",fontSize:"1.05rem"})},option:function(e){return Object(n.a)(Object(n.a)({},e),{},{cursor:"default",":active":Object(n.a)(Object(n.a)({},e[":active"]),{},{color:"#fff",backgroundColor:"#846446"}),":hover":Object(n.a)(Object(n.a)({},e[":hover"]),{},{color:"#fff",backgroundColor:"#846446"})})},menu:function(e){return Object(n.a)({},e)}},ze=Object(n.a)(Object(n.a)({},Re),{},{control:function(e){return Object(n.a)(Object(n.a)({},Re.control(e)),{},{borderColor:qe.estado?"#dc3545":"#ced4da"})}}),Ae=Object(n.a)(Object(n.a)({},Re),{},{control:function(e){return Object(n.a)(Object(n.a)({},Re.control(e)),{},{borderColor:qe.cidade?"#dc3545":"#ced4da"})}});return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(k.a,{ref:a}),Object(J.jsxs)(u.a,{children:[Object(J.jsx)(j.a,{children:Object(J.jsx)(b.a,{children:Object(J.jsx)(O.a,{children:Object(J.jsx)(v.a,{children:Object(J.jsx)("h3",{children:"Detalhes do An\xfancio"})})})})}),Object(J.jsx)(j.a,{children:Object(J.jsx)(b.a,{children:Object(J.jsx)(O.a,{children:Object(J.jsxs)(f.a,{children:[Object(J.jsxs)(p.a,{children:[Object(J.jsx)(h.a,{type:"text",placeholder:"T\xedtulo",value:z,invalid:!!qe.titulo,onChange:function(e){var a=e.target.value;return A(a)}}),Object(J.jsx)(g.a,{children:qe.titulo})]}),Object(J.jsxs)(p.a,{children:[Object(J.jsx)(h.a,{type:"textarea",placeholder:"Descri\xe7\xe3o",value:M,invalid:!!qe.descricao,onChange:function(e){var a=e.target.value;return D(a)}}),Object(J.jsx)(g.a,{children:qe.descricao})]}),Object(J.jsx)(l.a,{className:"basic-single mb-3",classNamePrefix:"select",placeholder:"Estado",noOptionsMessage:function(){return"Nenhuma estado encontrado"},loadingMessage:function(){return"Carregando estados"},isLoading:Y,isClearable:!0,isSearchable:!0,value:K,options:T,styles:ze,onFocus:De,onChange:Me}),Object(J.jsx)(l.a,{className:"basic-single mb-3",classNamePrefix:"select",placeholder:"Cidade",noOptionsMessage:function(){return K?"Nenhuma cidade encontrada":"Selecione um estado"},loadingMessage:function(){return"Carregando cidades"},isLoading:de,isClearable:!0,isSearchable:!0,value:re,styles:Ae,options:ae,onChange:Fe}),Object(J.jsxs)(j.a,{children:[Object(J.jsx)(b.a,{md:4,children:Object(J.jsxs)(p.a,{children:[Object(J.jsx)(h.a,{type:"text",placeholder:"Pre\xe7o",value:be,invalid:!!qe.preco,onChange:function(e){var a=e.target.value;return Oe(a)}}),Object(J.jsx)(g.a,{children:qe.preco})]})}),Object(J.jsx)(b.a,{md:4,children:Object(J.jsx)(p.a,{children:Object(J.jsxs)(m.a,{type:"select",id:"unidade",name:"unidade",value:ye,onChange:function(e){var a=e.target.value;return we(a)},children:[Object(J.jsx)("option",{value:"",children:"Por"}),xe.map((function(e){return Object(J.jsx)("option",{value:e._id,children:e.name},e._id)}))]})})}),Object(J.jsx)(b.a,{md:4,children:Object(J.jsxs)(p.a,{children:[Object(J.jsx)(h.a,{type:"text",placeholder:"Quantidade",value:pe,invalid:!!qe.quantidade,onChange:function(e){var a=e.target.value;return he(a)}}),Object(J.jsx)(g.a,{children:qe.quantidade})]})})]})]})})})}),Pe&&Object(J.jsx)(j.a,{children:Object(J.jsx)(b.a,{children:Object(J.jsx)(O.a,{children:Object(J.jsx)(x.a,{children:Object(J.jsxs)(j.a,{className:"justify-content-between px-3",children:[Object(J.jsx)(S.a,{onClick:function(){e("admin-usuario/anuncio")},children:"Anterior"}),Object(J.jsx)(S.a,{onClick:function(c){c.preventDefault(),Object(o.a)(r.a.mark((function c(){var o,i,s,d,l;return r.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,o=JSON.parse(localStorage.getItem(y.a)),o=Object(n.a)(Object(n.a)({},o),{},{titulo:z,descricao:M,estado:K,cidade:re,preco:be,quantidade:pe,unidade:ye}),i=Object(n.a)(Object(n.a)({},o),{},{estado:null===K||void 0===K?void 0:K.sigla,cidade:null===re||void 0===re?void 0:re.value,categorias:o.selectedCategorias.map((function(e){return e.categoria._id})),selectedCategorias:null}),s=C.b().shape({titulo:C.c().required("Informe um t\xedtulo para o an\xfancio"),descricao:C.c().required("Informe uma descri\xe7\xe3o"),estado:C.c().required("Selecione um estado"),cidade:C.c().required("Selecione uma cidade")}),c.next=7,s.validate(i,{abortEarly:!1});case 7:if(console.log(o),!o.anuncioId){c.next=11;break}return E(o.anuncioId,"/anuncios",i,(function(a){localStorage.setItem(y.a,JSON.stringify(o)),e("admin-usuario/anuncio-video-fotos/".concat(a.animal._id))})),c.abrupt("return");case 11:q("/anuncios",i,(function(a){o=Object(n.a)(Object(n.a)({},o),{},{anuncioId:a.anuncio._id,animalId:a.animal._id}),console.log(o),localStorage.setItem(y.a,JSON.stringify(o)),e("admin-usuario/anuncio-video-fotos/".concat(a.animal._id))})),c.next=30;break;case 14:if(c.prev=14,c.t0=c.catch(0),t(!1),console.log(c.t0),_e({}),!(c.t0 instanceof C.a)){c.next=25;break}return a.current.notify({message:"Por favor, preencha todos os dados necess\xe1rios para criar o an\xfancio",color:"warning"}),d={},c.t0.inner.forEach((function(e){d[e.path]=e.message})),_e(d),c.abrupt("return");case 25:if(!(c.t0&&c.t0.response&&c.t0.response.data)){c.next=29;break}return l=c.t0.response.data.message,a.current.notify({message:l,color:"danger"}),c.abrupt("return");case 29:a.current.notify({message:"Falha ao realizar o cadastro do an\xfancio",color:"danger"});case 30:case"end":return c.stop()}}),c,null,[[0,14]])})))()},children:"Salvar"})]})})})})})]})]})}}}]);
//# sourceMappingURL=12.190ee01d.chunk.js.map